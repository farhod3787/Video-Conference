(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{21:function(e,t,a){},44:function(e,t,a){},70:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=70},71:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(36),o=a.n(c),i=(a(44),a(13)),r=a(2),d=a(73),l=(a(21),a(1));var j=()=>{const e=Object(r.e)(),[t,a]=Object(s.useState)(!0),[n,c]=Object(s.useState)(!0);return Object(l.jsx)("div",{className:"wraper",children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"video-icon",children:[Object(l.jsx)("i",{className:"fas fa-video"}),Object(l.jsx)("h1",{children:"VIDEO CONFERENCE"})]}),t?Object(l.jsx)("button",{className:"btn",value:"Enter User Name",onClick:()=>{a(!1)},children:"Start Meeting"}):Object(l.jsxs)("form",{className:"form",onSubmit:t=>{e.push("".concat(Object(d.a)(),"?name=").concat(t.target.text.value))},children:[Object(l.jsx)("input",{type:"text",name:"text",className:"input-name",placeholder:"Enter your name..."}),Object(l.jsx)("button",{className:"btn",type:"submit",children:"Start"})]}),n?Object(l.jsx)("button",{className:"btn",id:"login-button",value:"Enter Room ID",onClick:()=>{c(!1)},children:"Join Meet"}):Object(l.jsxs)("form",{className:"form",onSubmit:t=>{t.preventDefault();new RegExp(/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/).test(t.target.roomId.value)?(console.log("valid"),e.push("".concat(t.target.roomId.value,"?name=").concat(t.target.username.value))):console.log("invalid uuid")},children:[Object(l.jsx)("input",{type:"text",name:"roomId",className:"input-name",placeholder:"Enter Room ID"}),Object(l.jsx)("input",{type:"text",name:"username",className:"input-name",placeholder:"Enter your name..."}),Object(l.jsx)("button",{className:"btn",type:"submit",children:"Start"})]})]})})},m=a(38),b=a.n(m),u=a(39),h=a.n(u);let O,v,p=[],x=b()("http://127.0.0.1:8000");var g=()=>{const[e,t]=Object(s.useState)(""),[a,n]=Object(s.useState)([]),[c,o]=Object(s.useState)(!1),[i,d]=Object(s.useState)(!1),{roomId:j}=Object(r.f)();Object(s.useEffect)((()=>(setInterval(void x.on("createMessage",(e=>{n([...a,e])})),100),()=>{x.off()}))),Object(s.useEffect)((()=>{var e;v=new h.a(void 0,{path:"/peerjs",host:"/",port:8e3}),v.on("open",(e=>{x.emit("join-room",j,e)}));const t=(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia)||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;t?t.call(navigator,{video:!0}).then((e=>{O=e;const t=document.createElement("video");m(t,O),a(e)})).catch((e=>{console.error("Xato yuz berdi:",e)})):console.error("getUserMedia API qo\u2018llab-quvvatlanmaydi."),x.on("user-disconnected",(e=>{p[e]&&p[e].destroy(),x.disconnect()}));const a=e=>{v.on("call",(t=>{t.answer(e);const a=document.createElement("video");t.on("stream",(e=>{m(a,e)}))}))};return x.on("user-connected",(e=>{navigator.mediaDevices.getUserMedia({video:!0}).then((t=>{const a=v.call(e,t),s=document.createElement("video");a.on("stream",(e=>{m(s,e)})),a.on("close",(()=>{s.remove()})),p[e]=a})).catch((e=>{console.error(e)}))})),()=>{x.off()}}),[j]);const m=(e,t)=>{const a=document.getElementById("video-grid");e.srcObject=t,e.addEventListener("loadedmetadata",(()=>{e.play(),e.muted=!0})),a.append(e)},b=()=>{O.getVideoTracks()[0].enabled?(O.getVideoTracks()[0].enabled=!1,d(!0)):(O.getVideoTracks()[0].enabled=!0,d(!1))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("header",{children:Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)("p",{children:"VIDEO CONFERENCE"}),Object(l.jsxs)("p",{children:["ROOM ID: ",j]})]})}),Object(l.jsxs)("div",{className:"show-case",children:[Object(l.jsxs)("div",{className:"main-left",children:[Object(l.jsx)("div",{className:"videos-grp",children:Object(l.jsx)("div",{id:"video-grid"})}),Object(l.jsxs)("div",{className:"options",children:[Object(l.jsxs)("div",{className:"options-left",children:[c?Object(l.jsx)("div",{id:"muteButton",className:"options-button",children:Object(l.jsx)("i",{class:"fas fa-microphone"})}):Object(l.jsx)("div",{id:"muteButton",className:"options-button",onClick:()=>{O.getAudioTracks()[0].enabled?(O.getAudioTracks()[0].enabled=!1,o(!0)):(O.getAudioTracks()[0].enabled=!0,o(!1))},children:Object(l.jsx)("i",{className:"fa fa-microphone-slash"})}),i?Object(l.jsx)("div",{id:"stopVideo",className:"options-button",onClick:b,children:Object(l.jsx)("i",{className:"fa fa-video"})}):Object(l.jsx)("div",{id:"stopVideo",className:"options-button",onClick:b,children:Object(l.jsx)("i",{className:"fa fa-video-slash"})})]}),Object(l.jsx)("div",{className:"options-right",children:Object(l.jsx)("div",{className:"leave-meet",children:Object(l.jsx)("button",{onClick:()=>{window.location.href="/"},children:"Leave Meeting"})})})]})]}),Object(l.jsxs)("div",{className:"main-right",children:[Object(l.jsx)("div",{className:"main-chat-window",children:Object(l.jsx)("div",{className:"messages",children:a.map(((e,t)=>Object(l.jsx)("div",{className:"msg chat",children:Object(l.jsx)("p",{children:e},t)},t)))})}),Object(l.jsx)("form",{onSubmit:a=>{a.preventDefault(),x.emit("message",{message:e,userId:v.id}),t(""),a.target.reset()},children:Object(l.jsxs)("div",{className:"main-message-container",children:[Object(l.jsx)("input",{id:"chat-message",type:"text",onChange:e=>{t(e.target.value)},autoComplete:"off",placeholder:"Type message here...",required:!0}),Object(l.jsx)("button",{type:"submit",id:"send",className:"options-button",children:Object(l.jsx)("i",{className:"fab fa-telegram-plane"})})]})})]})]})]})};var f=function(){return Object(l.jsxs)(i.a,{children:[Object(l.jsx)(r.a,{path:"/",component:j,exact:!0}),Object(l.jsx)(r.a,{path:"/:roomId",component:g})]})};var N=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,74)).then((t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:c,getTTFB:o}=t;a(e),s(e),n(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(f,{})}),document.getElementById("root")),N()}},[[71,1,2]]]);
//# sourceMappingURL=main.93bc3d79.chunk.js.map